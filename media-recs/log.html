<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Log</title>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/layout.js" defer></script>
  <style>
    /* --- Retro receipt look --- */
    main {
      width: 60%;
      margin: 2rem auto;
      background: #fffaf8;
      border: 2px dashed #c78888;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 2rem;
      font-family: 'Courier New', monospace;
      color: #4d2b2b;
      position: relative;
      overflow: hidden;
    }

    main::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 20px;
      background: repeating-linear-gradient(
        45deg,
        #fddcdc,
        #fddcdc 10px,
        #ffffff 10px,
        #ffffff 20px
      );
    }

    h1 {
      text-align: center;
      color: #8b4d4d;
      font-size: 1.8em;
      margin-bottom: 1rem;
    }

    .log-entry {
      border-bottom: 1px dotted #c78888;
      padding: 1rem 0;
      animation: fadeIn 0.8s ease;
    }

    .log-entry:last-child {
      border-bottom: none;
    }

    .log-date {
      font-weight: bold;
      color: #8b4d4d;
    }

    .log-type {
      font-style: italic;
      color: #a56969;
    }

    .log-rating {
      color: #d49b9b;
    }

    .log-notes {
      margin-top: 0.5rem;
      line-height: 1.5;
      color: #5b4040;
    }

    .refresh-button {
      display: block;
      margin: 1.5rem auto;
      background: #f6caca;
      border: 2px solid #b97a7a;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
      font-family: 'Courier New', monospace;
    }

    .refresh-button:hover {
      background: #f2baba;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- LEFT SIDEBAR -->
    <aside class="sidebar left">
      <nav class="menu">
        <ul>
          <li><a href="../index.html">üè† Home</a></li>
          <li class="dropdown">
            <a href="#">üíñ About ‚ñæ</a>
            <ul class="submenu">
              <li><a href="../about/about-me.html">About Me</a></li>
              <li><a href="../about/about-site.html">About the Site</a></li>
              <li><a href="../about/guestbook.html">Guestbook</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#">üåü Unique Me ‚ñæ</a>
            <ul class="submenu">
              <li><a href="../unique-me/working-on.html">What I‚Äôm Working On</a></li>
              <li><a href="../unique-me/favorites.html">Favorites</a></li>
              <li><a href="../unique-me/fun-facts.html">Fun Facts</a></li>
              <li><a href="../unique-me/featured.html">Features</a></li>
              <li><a href="../unique-me/clubs.html">Clubs I‚Äôm In</a></li>
              <li><a href="../unique-me/current-activities.html">Current Activities</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#">üì∫ Media Recs ‚ñæ</a>
            <ul class="submenu">
              <li><a href="../media-recs/log.html">Log</a></li>
              <li><a href="../media-recs/youtube.html">YouTube</a></li>
              <li><a href="../media-recs/books.html">Books</a></li>
              <li><a href="../media-recs/movies.html">Movies</a></li>
              <li><a href="../media-recs/tv.html">TV Shows</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main id="content">
      <h1>üéûÔ∏è My Media Log</h1>
      <p style="text-align:center;">Like a little receipt of my thoughts ‚Äî everything I‚Äôve read, watched, or loved lately.</p>
      <div id="log-entries"></div>
      <button class="refresh-button" onclick="loadMediaLog()">üîÑ Refresh Log</button>
    </main>
  </div>

  <script>
    async function loadMediaLog() {
      const container = document.getElementById('log-entries');
      container.innerHTML = "<p>Loading...</p>";

      try {
        const response = await fetch('../data/media-log.txt');
        const text = await response.text();

        const entries = text.trim().split(/\n\s*\n/);
        container.innerHTML = "";

        entries.forEach(entry => {
          const [header, ...body] = entry.split('\n');
          const match = header.match(/\[(.*?)\]\s*(.*?)\s*-\s*(.*?)\s*(‚òÖ.*)/);
          if (match) {
            const [_, date, type, title, rating] = match;
            const notes = body.join('\n');
            const div = document.createElement('div');
            div.className = 'log-entry';
            div.innerHTML = `
              <div class="log-date">${date}</div>
              <div class="log-type">${type}</div>
              <div class="log-title">${title}</div>
              <div class="log-rating">${rating}</div>
              <div class="log-notes">${notes}</div>
            `;
            container.appendChild(div);
          }
        });
      } catch (err) {
        container.innerHTML = "<p>Could not load log.</p>";
      }
    }

    loadMediaLog();
  </script>
</body>
</html>
